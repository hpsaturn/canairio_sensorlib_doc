\label{index_md_README}%
\Hypertarget{index_md_README}%
\href{https://github.com/kike-canaries/canairio_sensorlib/actions/}{\texttt{ }} \href{https://travis-ci.com/kike-canaries/canairio_sensorlib.svg?branch=master}{\texttt{ }} 

\doxysection*{Air Quality \mbox{\hyperlink{classSensors}{Sensors}} Library}

Generic sensor manager, abstractions and bindings of multiple sensors \href{https://github.com/kike-canaries/canairio_sensorlib/blob/master/platformio.ini\#L18-L34}{\texttt{ libraries}}\+: Honeywell, Plantower, Panasonic, Sensirion, etc. and CO2 sensors. Also it\textquotesingle{}s handling others environment sensors. This library is for general purpose, but also is the sensors library base of \href{https://canair.io/docs}{\texttt{ Can\+Air\+IO project}}.

For developers also you can check the complete library documentation \href{http://hpsaturn.com/canairio_sensorlib_doc/html/index.html}{\texttt{ here}}

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{1}{|X[-1]}|}
\hline
Don\textquotesingle{}t forget to star ⭐ this repository   \\\cline{1-1}
\end{longtabu}


\doxysection*{Supported sensors}

\doxysubsubsection*{PM sensors}

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{5}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Sensor model   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ UART   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ I2C   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Detection mode   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Status    }\\\cline{1-5}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Sensor model   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ UART   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ I2C   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Detection mode   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Status    }\\\cline{1-5}
\endhead
Honeywell HPMA115\+S0   &\PBS\centering Yes   &\PBS\centering ---   &\PBS\centering Auto   &\PBS\centering DEPRECATED    \\\cline{1-5}
Panasonic SN-\/\+GCJA5L   &\PBS\centering Yes   &\PBS\centering Yes   &\PBS\centering Auto   &\PBS\centering STABLE    \\\cline{1-5}
Plantower models   &\PBS\centering Yes   &\PBS\centering ---   &\PBS\centering Auto   &\PBS\centering STABLE    \\\cline{1-5}
Nova SDS011   &\PBS\centering Yes   &\PBS\centering ---   &\PBS\centering Auto   &\PBS\centering STABLE    \\\cline{1-5}
IKEA Vindriktning   &\PBS\centering Yes   &\PBS\centering ---   &\PBS\centering Select   &\PBS\centering TESTING    \\\cline{1-5}
Sensirion SPS30   &\PBS\centering Yes   &\PBS\centering Yes   &\PBS\centering Select / Auto   &\PBS\centering STABLE   \\\cline{1-5}
\end{longtabu}


NOTE\+: Panasonic via UART in ESP8266 maybe needs select in detection

\doxysubsubsection*{CO2 sensors}

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{5}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Sensor model   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ UART   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ I2C   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Detection mode   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Status    }\\\cline{1-5}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Sensor model   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ UART   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ I2C   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Detection mode   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Status    }\\\cline{1-5}
\endhead
Sensirion SCD30   &\PBS\centering ---   &\PBS\centering Yes   &\PBS\centering Auto   &\PBS\centering STABLE    \\\cline{1-5}
Sensirion SCD4x   &\PBS\centering ---   &\PBS\centering Yes   &\PBS\centering Auto   &\PBS\centering TESTING    \\\cline{1-5}
MHZ19   &\PBS\centering Yes   &\PBS\centering ---   &\PBS\centering Select   &\PBS\centering STABLE    \\\cline{1-5}
CM1106   &\PBS\centering Yes   &\PBS\centering ---   &\PBS\centering Select   &\PBS\centering STABLE    \\\cline{1-5}
Sense\+Air S8   &\PBS\centering Yes   &\PBS\centering ---   &\PBS\centering Select   &\PBS\centering STABLE   \\\cline{1-5}
\end{longtabu}


\doxysubsubsection*{Environmental sensors}

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{4}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Sensor model   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Protocol   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Detection mode   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Status    }\\\cline{1-4}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Sensor model   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Protocol   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Detection mode   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Status    }\\\cline{1-4}
\endhead
AM2320   &\PBS\centering i2c   &\PBS\centering Auto   &\PBS\centering STABLE    \\\cline{1-4}
SHT31   &\PBS\centering i2c   &\PBS\centering Auto   &\PBS\centering STABLE    \\\cline{1-4}
AHT10   &\PBS\centering i2c   &\PBS\centering Auto   &\PBS\centering STABLE    \\\cline{1-4}
BME280   &\PBS\centering i2c   &\PBS\centering Auto   &\PBS\centering STABLE    \\\cline{1-4}
BMP280   &\PBS\centering i2c   &\PBS\centering Auto   &\PBS\centering TESTING    \\\cline{1-4}
BME680   &\PBS\centering i2c   &\PBS\centering Auto   &\PBS\centering STABLE    \\\cline{1-4}
DHTxx   &\PBS\centering Two\+Wire   &\PBS\centering Auto   &\PBS\centering DISABLED   \\\cline{1-4}
\end{longtabu}


NOTE\+: DHT22 is supported but is not recommended. Please see the documentation.

\doxysubsubsection*{Platforms supported}

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{4}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Platform   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Variants   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Notes   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Status    }\\\cline{1-4}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Platform   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Variants   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Notes   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Status    }\\\cline{1-4}
\endhead
ESP32   &\PBS\centering WROVER$\ast$   &\PBS\centering ESP32\+Devkit and similar (recommended)   &\PBS\centering STABLE    \\\cline{1-4}
ESP32\+S3   &\PBS\centering Lily\+Go TDisplay   &\PBS\centering In testing   &\PBS\centering UNSTABLE    \\\cline{1-4}
ESP32\+C3   &\PBS\centering Devkit v3   &\PBS\centering In testing   &\PBS\centering UNSTABLE    \\\cline{1-4}
ESP8266   &\PBS\centering 12   &\PBS\centering D1\+MINI tested and similar (old)   &\PBS\centering STABLE    \\\cline{1-4}
Atmelsam   &\PBS\centering seeed\+\_\+wio\+\_\+terminal   &\PBS\centering Only works via i2c on left port   &\PBS\centering STABLE    \\\cline{1-4}
Arduino   &\PBS\centering Atmel   &\PBS\centering Some third party libraries fails   &\PBS\centering IN PROGRESS   \\\cline{1-4}
\end{longtabu}


\doxysection*{Features}


\begin{DoxyItemize}
\item Unified variables and getters for all sensors
\item Auto UART port selection (Hw, Sw, UART1, UART2, etc)
\item Multiple i2c reads and one UART sensor read support
\item Two I2C channel supported (Wire and Wire1)
\item Real time registry of sensors unit registered (see multivariable)
\item Get vendor names of all devices detected
\item Preselected main stream UART pins from popular boards
\item Auto config UART port for Plantower, Honeywell and Panasonic sensors
\item Unified calibration trigger for all CO2 sensors
\item Unified CO2 Altitude compensation
\item Unified temperature offset for CO2 and environment sensors
\item Public access to main objects of each library (full methods access)
\item Get unit symbol and name and each sub-\/sensor
\item Get the main group type\+: NONE, PM, CO2 and ENV.
\item Basic debug mode support toggle in execution
\item Basic power saving management with sample time $>$ 30s on SPS30 ~\newline

\end{DoxyItemize}

Full list of all sub libraries supported \href{https://github.com/kike-canaries/canairio_sensorlib/blob/master/library.json\#L72-L89}{\texttt{ here}}

\doxysection*{Quick implementation}


\begin{DoxyCode}{0}
\DoxyCodeLine{sensors.\mbox{\hyperlink{classSensors_a729f911e0508cc8814a2276ff519b219}{setOnDataCallBack}}(\&onSensorDataOk);   \textcolor{comment}{// all data read callback}}
\DoxyCodeLine{sensors.\mbox{\hyperlink{classSensors_ab0b53515ecf64e30e854a27eb0a1399d}{init}}();                               \textcolor{comment}{// start all sensors and}}

\end{DoxyCode}


\doxysection*{Full implementation}

You can review a full implementation on \href{https://github.com/kike-canaries/canairio_firmware/blob/master/src/main.cpp}{\texttt{ Can\+Air\+IO project firmware}}, but a little brief is the next\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{void} onSensorDataOk() \{}
\DoxyCodeLine{    Serial.print(\textcolor{stringliteral}{"{}PM2.5: "{}} + String(sensors.\mbox{\hyperlink{classSensors_adc3ad26b8a9be10b2100e3b023fdefc4}{getPM25}}()));}
\DoxyCodeLine{    Serial.print(\textcolor{stringliteral}{"{} CO2: "{}}  + String(sensors.\mbox{\hyperlink{classSensors_ad953d4564cc20d8134cccd962435dd81}{getCO2}}()));}
\DoxyCodeLine{    Serial.print(\textcolor{stringliteral}{"{} CO2H: "{}} + String(sensors.\mbox{\hyperlink{classSensors_a7fa1fe8f4f3469bce9311be880c243df}{getCO2humi}}()));}
\DoxyCodeLine{    Serial.print(\textcolor{stringliteral}{"{} CO2T: "{}} + String(sensors.\mbox{\hyperlink{classSensors_a7afb5c201c4e1933c96719e632181f71}{getCO2temp}}()));}
\DoxyCodeLine{    Serial.print(\textcolor{stringliteral}{"{} H: "{}}    + String(sensors.\mbox{\hyperlink{classSensors_a255bf73cd4afaf6c656dbbcabb1a8bb1}{getHumidity}}()));}
\DoxyCodeLine{    Serial.println(\textcolor{stringliteral}{"{} T: "{}}  + String(sensors.\mbox{\hyperlink{classSensors_ac4c22766994b94a2a28158ed72dc4a0c}{getTemperature}}()));}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{void} onSensorDataError(\textcolor{keyword}{const} \textcolor{keywordtype}{char} * msg)\{}
\DoxyCodeLine{    Serial.println(\textcolor{stringliteral}{"{}Sensor read error: "{}}+String(msg));}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{void} setup() \{}
\DoxyCodeLine{}
\DoxyCodeLine{    sensors.\mbox{\hyperlink{classSensors_a729f911e0508cc8814a2276ff519b219}{setOnDataCallBack}}(\&onSensorDataOk);     \textcolor{comment}{// all data read callback}}
\DoxyCodeLine{    sensors.\mbox{\hyperlink{classSensors_aba1b7a633d1d89514c891220b603351f}{setOnErrorCallBack}}(\&onSensorDataError); \textcolor{comment}{// [optional] error callback}}
\DoxyCodeLine{    sensors.\mbox{\hyperlink{classSensors_ac723c0d9cf5af5daa0fa8d041f41f3d8}{setSampleTime}}(15);                      \textcolor{comment}{// [optional] sensors sample time (default 5s)}}
\DoxyCodeLine{    sensors.\mbox{\hyperlink{classSensors_a122c0d2922d2a80984e8a3ac21b883c3}{setTempOffset}}(cfg.toffset);             \textcolor{comment}{// [optional] temperature compensation}}
\DoxyCodeLine{    sensors.\mbox{\hyperlink{classSensors_a27eec756609a421b3927c0dc132ae7c6}{setCO2AltitudeOffset}}(cfg.altoffset);    \textcolor{comment}{// [optional] CO2 altitude compensation}}
\DoxyCodeLine{    sensors.\mbox{\hyperlink{classSensors_a8fe6e43b99919f6c481792f0c0de8c50}{setSeaLevelPressure}}(1036.25);           \textcolor{comment}{// [optional] Set sea level pressure in hpa}}
\DoxyCodeLine{    sensors.\mbox{\hyperlink{classSensors_ac749e2c2618a177afa7d72ce68573fa5}{setDebugMode}}(\textcolor{keyword}{false});                    \textcolor{comment}{// [optional] debug mode to get detailed msgs}}
\DoxyCodeLine{    sensors.\mbox{\hyperlink{classSensors_ae25465fbd64d3b2b9ae31e2cb5a4b246}{detectI2COnly}}(\textcolor{keyword}{true});                    \textcolor{comment}{// [optional] force to only i2c sensors}}
\DoxyCodeLine{    sensors.\mbox{\hyperlink{classSensors_ab0b53515ecf64e30e854a27eb0a1399d}{init}}();                                 \textcolor{comment}{// Auto detection to UART and i2c sensors}}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Alternatives only for UART sensors (TX/RX):}}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// sensors.init(SENSORS::Auto);                 // Auto detection to UART sensors (Honeywell, Plantower, Panasonic)}}
\DoxyCodeLine{    \textcolor{comment}{// sensors.init(SENSORS::SGCJA5);               // Force UART detection to Panasonic sensor}}
\DoxyCodeLine{    \textcolor{comment}{// sensors.init(SENSORS::SSPS30);               // Force UART detection to Sensirion sensor}}
\DoxyCodeLine{    \textcolor{comment}{// sensors.init(SENSORS::SMHZ19);               // Force UART detection to Mhz14 or Mhz19 CO2 sensor}}
\DoxyCodeLine{    \textcolor{comment}{// sensors.init(SENSORS::SDS011);               // Force UART detection to SDS011 sensor}}
\DoxyCodeLine{    \textcolor{comment}{// sensors.init(SENSORS::IKEAVK);               // Force UART detection to IKEA Vindriktning sensor}}
\DoxyCodeLine{    \textcolor{comment}{// sensors.init(SENSORS::SCM1106);              // Force UART detection to CM1106 CO2 sensor}}
\DoxyCodeLine{    \textcolor{comment}{// sensors.init(SENSORS::SAIRS8);               // Force UART detection to SenseAirS8 CO2 sensor}}
\DoxyCodeLine{    \textcolor{comment}{// sensors.init(SENSORS::Auto,PMS\_RX,PMS\_TX);   // Auto detection on custom RX,TX}}
\DoxyCodeLine{  }
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// Also you can access to sub-\/library objects, and perform for example calls like next:}}
\DoxyCodeLine{}
\DoxyCodeLine{    \textcolor{comment}{// sensors.sps30.sleep()}}
\DoxyCodeLine{    \textcolor{comment}{// sensors.bme.readPressure();}}
\DoxyCodeLine{    \textcolor{comment}{// sensors.mhz19.getRange();}}
\DoxyCodeLine{    \textcolor{comment}{// sensors.scd30.getTemperatureOffset();}}
\DoxyCodeLine{    \textcolor{comment}{// sensors.aht10.readRawData();}}
\DoxyCodeLine{    \textcolor{comment}{// sensors.s8.set\_ABC\_period(period)}}
\DoxyCodeLine{    \textcolor{comment}{// ...}}
\DoxyCodeLine{}
\DoxyCodeLine{    delay(500);}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{void} loop() \{}
\DoxyCodeLine{    sensors.\mbox{\hyperlink{classSensors_a255ece4e475221edb8ba7a8983014a76}{loop}}();  \textcolor{comment}{// read sensor data and showed it}}
\DoxyCodeLine{\}}

\end{DoxyCode}


\doxysubsection*{Multivariable demo}

In this \href{https://www.youtube.com/watch?v=-5Va47Bap48}{\texttt{ demo}} on two different devices with multiple sensors, you can choose the possible sub sensors units or variables\+:

\href{https://www.youtube.com/watch?v=-5Va47Bap48}{\texttt{ }}

In this \href{https://www.youtube.com/watch?v=uxlmP905-FE}{\texttt{ demo}} on a simple sketch you could have a dinamyc list of variables of multiple sensors brands\+:

\href{https://youtu.be/i15iEF47CbY}{\texttt{ }}

\doxysubsection*{Multivariable alternative implementation}

The last version added new getters to have the current status of each unit of each sensor connected to the device in real time. Also you can retrieve the list of device names and other stuff\+: ~\newline


For example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <Arduino.h>}}
\DoxyCodeLine{\textcolor{preprocessor}{\#include <Sensors.hpp>}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{void} printSensorsDetected() \{}
\DoxyCodeLine{    uint16\_t sensors\_count =  sensors.\mbox{\hyperlink{classSensors_ad8395e69cf5dcc68d0a8049ec7372a81}{getSensorsRegisteredCount}}();}
\DoxyCodeLine{    uint16\_t units\_count   =  sensors.\mbox{\hyperlink{classSensors_a1d723cdb619b2d61d3e4080182a12cbb}{getUnitsRegisteredCount}}();}
\DoxyCodeLine{    Serial.println(\textcolor{stringliteral}{"{}-\/-\/>[MAIN] Sensors detected count\(\backslash\)t: "{}} + String(sensors\_count));}
\DoxyCodeLine{    Serial.println(\textcolor{stringliteral}{"{}-\/-\/>[MAIN] Sensors units count  \(\backslash\)t: "{}}  + String(units\_count));}
\DoxyCodeLine{    Serial.print(  \textcolor{stringliteral}{"{}-\/-\/>[MAIN] Sensors devices names\(\backslash\)t: "{}});}
\DoxyCodeLine{    \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{    \textcolor{keywordflow}{while} (sensors.\mbox{\hyperlink{classSensors_af9ee8f89e81d76a4c2b41ed6dc38f2f3}{getSensorsRegistered}}()[i++] != 0) \{}
\DoxyCodeLine{        Serial.print(sensors.\mbox{\hyperlink{classSensors_aa7ca70f31838cba52b96f76aa4a0d4a2}{getSensorName}}((SENSORS)sensors.\mbox{\hyperlink{classSensors_af9ee8f89e81d76a4c2b41ed6dc38f2f3}{getSensorsRegistered}}()[i -\/ 1]));}
\DoxyCodeLine{        Serial.print(\textcolor{stringliteral}{"{},"{}});}
\DoxyCodeLine{    \}}
\DoxyCodeLine{    Serial.println();}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{void} printSensorsValues() \{}
\DoxyCodeLine{    Serial.println(\textcolor{stringliteral}{"{}\(\backslash\)n-\/-\/>[MAIN] Preview sensor values:"{}});}
\DoxyCodeLine{    UNIT unit = sensors.\mbox{\hyperlink{classSensors_ad33c76f341c86ac1900c5953fca9c0d1}{getNextUnit}}();}
\DoxyCodeLine{    \textcolor{keywordflow}{while}(unit != UNIT::NUNIT) \{}
\DoxyCodeLine{        String uName = sensors.\mbox{\hyperlink{classSensors_a4abb5d2a00d31a407e32cbdabe00b6eb}{getUnitName}}(unit);}
\DoxyCodeLine{        \textcolor{keywordtype}{float} uValue = sensors.\mbox{\hyperlink{classSensors_a7e75dd4e3f2e655a9961f57650cbf749}{getUnitValue}}(unit);}
\DoxyCodeLine{        String uSymb = sensors.\mbox{\hyperlink{classSensors_a365a45dc5c9ab598cfc206368579b94a}{getUnitSymbol}}(unit);}
\DoxyCodeLine{        Serial.print(\textcolor{stringliteral}{"{}-\/-\/>[MAIN] "{}} + uName + \textcolor{stringliteral}{"{}: "{}} + String(uValue) + \textcolor{stringliteral}{"{} "{}} + uSymb);}
\DoxyCodeLine{        unit = sensors.\mbox{\hyperlink{classSensors_ad33c76f341c86ac1900c5953fca9c0d1}{getNextUnit}}();}
\DoxyCodeLine{    \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{void} onSensorDataOk() \{}
\DoxyCodeLine{    Serial.println(\textcolor{stringliteral}{"{}======= E X A M P L E   T E S T ========="{}});}
\DoxyCodeLine{    printSensorsDetected();}
\DoxyCodeLine{    printSensorsValues(); }
\DoxyCodeLine{    Serial.println(\textcolor{stringliteral}{"{}========================================="{}});}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{/******************************************************************************}}
\DoxyCodeLine{\textcolor{comment}{*  M A I N}}
\DoxyCodeLine{\textcolor{comment}{******************************************************************************/}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{void} setup() \{}
\DoxyCodeLine{    Serial.begin(115200);}
\DoxyCodeLine{    delay(100);}
\DoxyCodeLine{    sensors.\mbox{\hyperlink{classSensors_ac723c0d9cf5af5daa0fa8d041f41f3d8}{setSampleTime}}(5);                       \textcolor{comment}{// config sensors sample time interval}}
\DoxyCodeLine{    sensors.\mbox{\hyperlink{classSensors_a729f911e0508cc8814a2276ff519b219}{setOnDataCallBack}}(\&onSensorDataOk);     \textcolor{comment}{// all data read callback}}
\DoxyCodeLine{    sensors.\mbox{\hyperlink{classSensors_ac749e2c2618a177afa7d72ce68573fa5}{setDebugMode}}(\textcolor{keyword}{true});                     \textcolor{comment}{// [optional] debug mode}}
\DoxyCodeLine{    sensors.\mbox{\hyperlink{classSensors_ae25465fbd64d3b2b9ae31e2cb5a4b246}{detectI2COnly}}(\textcolor{keyword}{false});                   \textcolor{comment}{// disable force to only i2c sensors}}
\DoxyCodeLine{    sensors.\mbox{\hyperlink{classSensors_ab0b53515ecf64e30e854a27eb0a1399d}{init}}();                                 \textcolor{comment}{// Auto detection to UART and i2c sensors}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{void} loop() \{}
\DoxyCodeLine{    sensors.\mbox{\hyperlink{classSensors_a255ece4e475221edb8ba7a8983014a76}{loop}}();  \textcolor{comment}{// read sensor data and showed it}}
\DoxyCodeLine{\}}

\end{DoxyCode}


\doxysubsection*{UART detection demo}

\href{https://www.youtube.com/watch?v=hmukAmG5Eec}{\texttt{ }}

Can\+Air\+IO sensorlib auto configuration demo on \href{https://www.youtube.com/watch?v=hmukAmG5Eec}{\texttt{ Youtube}}

\doxysection*{Wiring}

The current version of library supports 3 kinds of wiring connection, UART, i2c and Two\+Wire, in the main boards the library using the defaults pins of each board, but in some special cases the pins are\+:

\doxysubsection*{UART}

\doxysubsubsection*{Predefined UART}

The library has \href{https://github.com/kike-canaries/canairio_sensorlib/blob/master/src/Sensors.hpp\#L19-L52}{\texttt{ pre-\/defined some UART pin configs}}, these are selected on compiling time. Maybe you don\textquotesingle{}t need change anything with your board, and maybe the nexts alternatives works for you\+:

\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{4}{|X[-1]}|}
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Board model   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ TX   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ RX   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Notes    }\\\cline{1-4}
\endfirsthead
\hline
\endfoot
\hline
\cellcolor{\tableheadbgcolor}\textbf{ Board model   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ TX   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ RX   }&\PBS\centering \cellcolor{\tableheadbgcolor}\textbf{ Notes    }\\\cline{1-4}
\endhead
ESP32\+GENERIC   &\PBS\centering 1   &\PBS\centering 3   &\PBS\centering ESP32 Pio defaults    \\\cline{1-4}
TTGOT7 / ESP32\+DEVKIT / D1\+MINI / NODEFINED   &\PBS\centering 16   &\PBS\centering 17   &\PBS\centering Can\+Air\+IO devices $\ast$$\ast$    \\\cline{1-4}
TTGO\+\_\+\+TDISPLAY   &\PBS\centering 12   &\PBS\centering 13   &\PBS\centering \\\cline{1-4}
M5\+COREINK   &\PBS\centering 14   &\PBS\centering 13   &\PBS\centering \\\cline{1-4}
TTGO TQ   &\PBS\centering 18   &\PBS\centering 13   &\PBS\centering \\\cline{1-4}
HELTEC   &\PBS\centering 18   &\PBS\centering 17   &\PBS\centering \\\cline{1-4}
WEMOSOLED   &\PBS\centering 15   &\PBS\centering 13   &\PBS\centering \\\cline{1-4}
ESP32\+PICOD4   &\PBS\centering 3   &\PBS\centering 1   &\PBS\centering \\\cline{1-4}
\end{longtabu}


$\ast$$\ast$ This pines are when you compile your project without specific any build variable or you board isn\textquotesingle{}t in the list. ~\newline


\doxysubsubsection*{Custom UART\+:}

Also you could define a custom UART pins in the init() method and select specific sensors model, like this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{sensors.\mbox{\hyperlink{classSensors_ab0b53515ecf64e30e854a27eb0a1399d}{init}}(SENSORS::SDS011,yourRX,yourTX); \textcolor{comment}{// custom RX, custom TX pines.}}

\end{DoxyCode}


\doxysubsection*{I2C (recommended)}

We are using the default pins for each board, some times it\textquotesingle{}s pins are 21,22, please check your board schematic.

\doxysubsection*{Two\+Wire (deprecated soon)}

For now we are using it only for DHT sensors in PIN 23. For more info please review the next lines \href{https://github.com/kike-canaries/canairio_sensorlib/blob/master/src/Sensors.hpp\#L19-L52}{\texttt{ here}}.

\doxysection*{Examples}

\doxysubsubsection*{Platform\+IO (recommended)}

\doxyparagraph*{Compiling and Installing}

We recommended Platform\+IO because is more easy than Arduino IDE. For this, please install first \href{http://platformio.org/}{\texttt{ Platform\+IO}} and its command line tools (Windows, Mac\+Os and Linux), {\bfseries{pio}} command, then connect your compatible board to the USB and run the next command\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{pio run -\/-\/target upload}

\end{DoxyCode}


\doxysubsubsection*{Arduino IDE}

Only import the {\ttfamily ino} file of the sample and install the libraries listed on {\ttfamily library.\+json} and this library.

\doxysubsubsection*{Arduino CLI}

\doxyparagraph*{Prerequisites}

For run the examples, you first need to install {\bfseries{arduino-\/cli}} or the {\bfseries{Arduino IDE}} with the libraries referenced in {\bfseries{lib\+\_\+deps}} on the file \href{https://github.com/kike-canaries/canairio_sensorlib/blob/master/platformio.ini}{\texttt{ platformio.\+ini}}, becuase {\bfseries{Arduino don\textquotesingle{}t install it automatically}} like Platform\+IO. Then put Can\+Air\+IO sensor library in your library directory, you can download it from \href{https://github.com/kike-canaries/canairio_sensorlib/releases}{\texttt{ releases}} section.

Also you need to add the {\bfseries{alternative links}} for supporting the ESP32 boards\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{arduino-\/cli config init}

\end{DoxyCode}


in the {\ttfamily .arduino15/arduino-\/cli.\+yaml} file add\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{board\_manager:}
\DoxyCodeLine{  additional\_urls:}
\DoxyCodeLine{    -\/ https://arduino.esp8266.com/stable/package\_esp8266com\_index.json}
\DoxyCodeLine{    -\/ https://raw.githubusercontent.com/espressif/arduino-\/esp32/gh-\/pages/package\_esp32\_index.json}

\end{DoxyCode}


\doxyparagraph*{Compiling and Installing}

From {\ttfamily arduino-\/cli} you can run the basic example in a ESP32 board following these steps\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{arduino-\/cli core update-\/index}
\DoxyCodeLine{arduino-\/cli core install esp32:esp32:lolin32}
\DoxyCodeLine{arduino-\/cli compile -\/-\/fqbn esp32:esp32:lolin32 basic}
\DoxyCodeLine{arduino-\/cli upload -\/-\/fqbn esp32:esp32:lolin32:UploadSpeed=115200 -\/p /dev/ttyUSB0 basic}

\end{DoxyCode}


where {\ttfamily basic} is the basic example on examples directory.

\doxysection*{Supporting the project}

If you want to contribute to the code or documentation, consider posting a bug report, feature request or a pull request.

When creating a pull request, we recommend that you do the following\+:


\begin{DoxyItemize}
\item Clone the repository
\item Create a new branch for your fix or feature. For example, git checkout -\/b fix/my-\/fix or git checkout -\/b feat/my-\/feature.
\item Run to any clang formatter if it is a code, for example using the {\ttfamily vscode} formatter. We are using Google style. More info \href{https://clang.llvm.org/docs/ClangFormatStyleOptions.html}{\texttt{ here}}
\item Document the PR description or code will be great
\item Target your pull request to be merged with {\ttfamily devel} branch
\end{DoxyItemize}

Also you can make a donation, be a patreon or buy a device\+: ~\newline


\href{https://raw.githubusercontent.com/kike-canaries/canairio_firmware/master/images/ethereum_donation_address.png}{\texttt{ }}


\begin{DoxyItemize}
\item Via {\bfseries{Ethereum}}\+: {\ttfamily 0x1779c\+D3b85b6\+D8\+Cf1\+A5886\+B2\+CF5\+C53a0\+E072\+C108}
\item Via {\bfseries{Liberapay}}\+: \href{https://liberapay.com/CanAirIO}{\texttt{ Can\+Air\+IO in Libera\+Pay}}
\item {\bfseries{Buy a device}}\+: \href{https://www.tindie.com/products/hpsaturn/canairio-bike/}{\texttt{ Can\+Air\+IO Bike in Tindie}}
\item \href{https://www.buymeacoffee.com/hpsaturn}{\texttt{ Inviting us {\bfseries{a coffee}}}}
\end{DoxyItemize}

\doxysection*{TODO}


\begin{DoxyItemize}
\item \mbox{[}x\mbox{]} Auto detection for UART sensors (Honeywell, Panasonic and Plantower)
\item \mbox{[}x\mbox{]} Added SPS30 library with auto UART detection
\item \mbox{[}x\mbox{]} Disable/enable logs (debug mode flag)
\item \mbox{[}x\mbox{]} Added bme280, bmp280, aht10, sht31, am2320 i2c sensors
\item \mbox{[}x\mbox{]} Exposed public sub-\/libraries objects, sps30, aht10, etc.
\item \mbox{[}x\mbox{]} Added old DHT sensors
\item \mbox{[}x\mbox{]} Added CO2 sensors\+: MHZ19, SCD30, CM1106 via UART
\item \mbox{[}x\mbox{]} Added SDS011 particle metter
\item \mbox{[}x\mbox{]} BME680 support
\item \mbox{[}x\mbox{]} Added Sensirion SPS30 and Panasonic SN-\/\+GCJA5 via i2c
\item \mbox{[}x\mbox{]} Enable/\+Disable UART detection for force only i2c
\item \mbox{[}x\mbox{]} Temperature and Altitude compensation
\item \mbox{[}x\mbox{]} Sense\+Air S8 via UART support
\item \mbox{[}x\mbox{]} Multivariable selection (get\+Next\+Unit(),get\+Unit\+Name(),etc)
\item \mbox{[}x\mbox{]} Two I2C channel supported for M5\+Stack Devices (M5\+StickC tested)
\item \mbox{[} \mbox{]} Sea level setting for Pressure sensors and others
\item \mbox{[} \mbox{]} Support to second UART port
\end{DoxyItemize}

\doxysection*{Projects using this Library}


\begin{DoxyItemize}
\item \href{https://github.com/kike-canaries/canairio_firmware}{\texttt{ Can\+Air\+IO Device}}\+: ESP32 Air quality device for mobile and fixed stations. (PM2.\+5 and CO2)
\item \href{https://emariete.com/medidor-co2-display-tft-color-ttgo-t-display-sensirion-scd30}{\texttt{ Medidor de CO2}}\+: Un medidor de CO2 de alta calidad con pantalla en color. (CO2) ~\newline

\item \href{https://github.com/hpsaturn/co2_m5coreink\#readme}{\texttt{ M5\+Core\+Ink Multi Sensor}}\+: Wall CO2, T, H, P, Alt, sensor with low consumption (30 days)
\end{DoxyItemize}

\doxysection*{Credits}

Thanks to all collaborators and \href{https://canair.io}{\texttt{ Can\+Air\+IO}} community for testing and reports. Visit us on \href{https://t.me/canairio}{\texttt{ Telegram}}

\DoxyHorRuler{0}
 