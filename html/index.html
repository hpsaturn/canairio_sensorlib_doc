<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CanAirIO Sensors Library: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CanAirIO Sensors Library
   &#160;<span id="projectnumber">0.5.1</span>
   </div>
   <div id="projectbrief">Generic sensor manager, abstratctions and bindings of multiple air sensors libraries</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">CanAirIO Sensors Library Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://github.com/kike-canaries/canairio_sensorlib/actions/"></a> <a href="https://travis-ci.com/kike-canaries/canairio_sensorlib.svg?branch=master"></a> </p><div class="image">
<object type="image/svg+xml" data="https://views.whatilearened.today/views/github/kike-canaries/canairio_sensorlib.svg" alt="ViewCount"></object>
</div>
<h1>Air Quality <a class="el" href="classSensors.html">Sensors</a> Library</h1>
<p>Generic sensor manager, abstractions and bindings of multiple sensors libraries: Honeywell, Plantower, Panasonic, Sensirion, etc. and CO2 sensors. Also it's handling others environment sensors. This library is for general purpose, but also is the sensors library base of <a href="https://canair.io/docs">CanAirIO project</a>.</p>
<p>For developers also you can check the complete library documentation <a href="http://hpsaturn.com/canairio_sensorlib_doc/html/index.html">here</a></p>
<h1>Supported sensors</h1>
<h3>PM sensors</h3>
<table class="doxtable">
<tr>
<th align="left">Sensor model </th><th align="center">UART </th><th align="center">I2C </th><th align="center">Detection mode </th><th align="center">Status  </th></tr>
<tr>
<td align="left">Honeywell HPMA115S0 </td><td align="center">Yes </td><td align="center">&mdash; </td><td align="center">Auto </td><td align="center">DEPRECATED </td></tr>
<tr>
<td align="left">Panasonic SN-GCJA5L </td><td align="center">Yes </td><td align="center">Yes </td><td align="center">Auto </td><td align="center">STABLE </td></tr>
<tr>
<td align="left">Plantower models </td><td align="center">Yes </td><td align="center">&mdash; </td><td align="center">Auto </td><td align="center">STABLE </td></tr>
<tr>
<td align="left">Nova SDS011 </td><td align="center">Yes </td><td align="center">&mdash; </td><td align="center">Auto </td><td align="center">STABLE </td></tr>
<tr>
<td align="left">Sensirion SPS30 </td><td align="center">Yes </td><td align="center">Yes </td><td align="center">Select / Auto </td><td align="center">STABLE </td></tr>
</table>
<p>NOTE: Panasonic via UART in ESP8266 maybe needs select in detection</p>
<h3>CO2 sensors</h3>
<table class="doxtable">
<tr>
<th align="left">Sensor model </th><th align="center">UART </th><th align="center">I2C </th><th align="center">Detection mode </th><th align="center">Status  </th></tr>
<tr>
<td align="left">Sensirion SCD30 </td><td align="center">&mdash; </td><td align="center">Yes </td><td align="center">Auto </td><td align="center">STABLE </td></tr>
<tr>
<td align="left">Sensirion SCD4x </td><td align="center">&mdash; </td><td align="center">Yes </td><td align="center">Auto </td><td align="center">TESTING </td></tr>
<tr>
<td align="left">MHZ19 </td><td align="center">Yes </td><td align="center">&mdash; </td><td align="center">Select </td><td align="center">STABLE </td></tr>
<tr>
<td align="left">CM1106 </td><td align="center">Yes </td><td align="center">&mdash; </td><td align="center">Select </td><td align="center">STABLE </td></tr>
<tr>
<td align="left">SenseAir S8 </td><td align="center">Yes </td><td align="center">&mdash; </td><td align="center">Select </td><td align="center">STABLE </td></tr>
</table>
<h3>Environmental sensors</h3>
<table class="doxtable">
<tr>
<th align="left">Sensor model </th><th align="center">Protocol </th><th align="center">Detection mode </th><th align="center">Status  </th></tr>
<tr>
<td align="left">AM2320 </td><td align="center">i2c </td><td align="center">Auto </td><td align="center">STABLE </td></tr>
<tr>
<td align="left">SHT31 </td><td align="center">i2c </td><td align="center">Auto </td><td align="center">STABLE </td></tr>
<tr>
<td align="left">AHT10 </td><td align="center">i2c </td><td align="center">Auto </td><td align="center">STABLE </td></tr>
<tr>
<td align="left">BME280 </td><td align="center">i2c </td><td align="center">Auto </td><td align="center">STABLE </td></tr>
<tr>
<td align="left">BMP280 </td><td align="center">i2c </td><td align="center">Auto </td><td align="center">TESTING </td></tr>
<tr>
<td align="left">BME680 </td><td align="center">i2c </td><td align="center">Auto </td><td align="center">STABLE </td></tr>
<tr>
<td align="left">DHTxx </td><td align="center">TwoWire </td><td align="center">Auto </td><td align="center">DEPRECATED </td></tr>
</table>
<p>NOTE: DHT22 is supported but is not recommended</p>
<h1>Features</h1>
<ul>
<li>Unified variables and getters for all sensors</li>
<li>Auto UART port selection (Hw, Sw, UART1, UART2, etc)</li>
<li>Multiple i2c reads and one UART sensor read support</li>
<li>Two I2C channel supported (Wire and Wire1)</li>
<li>Real time registry of sensors unit registered (see multivariable)</li>
<li>Get vendor names of all devices detected</li>
<li>Preselected main stream UART pins from popular boards</li>
<li>Auto config UART port for Plantower, Honeywell and Panasonic sensors</li>
<li>Unified calibration trigger for all CO2 sensors</li>
<li>Unified CO2 Altitude compensation</li>
<li>Unified temperature offset for CO2 and environment sensors</li>
<li>Public access to main objects of each library (full methods access)</li>
<li>Get unit symbol and name and each sub-sensor</li>
<li>Get the main group type: NONE, PM, CO2 and ENV.</li>
<li>Basic debug mode support toggle in execution</li>
<li>Basic power saving management with sample time &gt; 30s on SPS30</li>
</ul>
<p>Full list of all sub libraries supported <a href="https://github.com/kike-canaries/canairio_sensorlib/blob/master/library.json#L72-L89">here</a></p>
<h1>Quick implementation</h1>
<div class="fragment"><div class="line">sensors.<a class="code" href="classSensors.html#a729f911e0508cc8814a2276ff519b219">setOnDataCallBack</a>(&amp;onSensorDataOk);   <span class="comment">// all data read callback</span></div><div class="line">sensors.<a class="code" href="classSensors.html#a019efdf3e65081e9ace94e1f05338e4b">init</a>();                               <span class="comment">// start all sensors and</span></div></div><!-- fragment --><h1>Full implementation</h1>
<p>You can review a full implementation on <a href="https://github.com/kike-canaries/canairio_firmware/blob/master/src/main.cpp">CanAirIO project firmware</a>, but a little brief is the next:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> onSensorDataOk() {</div><div class="line">    Serial.print(<span class="stringliteral">&quot;PM2.5: &quot;</span> + String(sensors.<a class="code" href="classSensors.html#adc3ad26b8a9be10b2100e3b023fdefc4">getPM25</a>()));</div><div class="line">    Serial.print(<span class="stringliteral">&quot; CO2: &quot;</span>  + String(sensors.<a class="code" href="classSensors.html#ad953d4564cc20d8134cccd962435dd81">getCO2</a>()));</div><div class="line">    Serial.print(<span class="stringliteral">&quot; CO2H: &quot;</span> + String(sensors.<a class="code" href="classSensors.html#a7fa1fe8f4f3469bce9311be880c243df">getCO2humi</a>()));</div><div class="line">    Serial.print(<span class="stringliteral">&quot; CO2T: &quot;</span> + String(sensors.<a class="code" href="classSensors.html#a7afb5c201c4e1933c96719e632181f71">getCO2temp</a>()));</div><div class="line">    Serial.print(<span class="stringliteral">&quot; H: &quot;</span>    + String(sensors.<a class="code" href="classSensors.html#a255bf73cd4afaf6c656dbbcabb1a8bb1">getHumidity</a>()));</div><div class="line">    Serial.println(<span class="stringliteral">&quot; T: &quot;</span>  + String(sensors.<a class="code" href="classSensors.html#ac4c22766994b94a2a28158ed72dc4a0c">getTemperature</a>()));</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> onSensorDataError(<span class="keyword">const</span> <span class="keywordtype">char</span> * msg){</div><div class="line">    Serial.println(<span class="stringliteral">&quot;Sensor read error: &quot;</span>+String(msg));</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> setup() {</div><div class="line"></div><div class="line">    sensors.<a class="code" href="classSensors.html#a729f911e0508cc8814a2276ff519b219">setOnDataCallBack</a>(&amp;onSensorDataOk);     <span class="comment">// all data read callback</span></div><div class="line">    sensors.<a class="code" href="classSensors.html#aba1b7a633d1d89514c891220b603351f">setOnErrorCallBack</a>(&amp;onSensorDataError); <span class="comment">// [optional] error callback</span></div><div class="line">    sensors.<a class="code" href="classSensors.html#ac723c0d9cf5af5daa0fa8d041f41f3d8">setSampleTime</a>(15);                      <span class="comment">// [optional] sensors sample time (default 5s)</span></div><div class="line">    sensors.<a class="code" href="classSensors.html#a122c0d2922d2a80984e8a3ac21b883c3">setTempOffset</a>(cfg.toffset);             <span class="comment">// [optional] temperature compensation</span></div><div class="line">    sensors.<a class="code" href="classSensors.html#a27eec756609a421b3927c0dc132ae7c6">setCO2AltitudeOffset</a>(cfg.altoffset);    <span class="comment">// [optional] CO2 altitude compensation</span></div><div class="line">    sensors.<a class="code" href="classSensors.html#ac749e2c2618a177afa7d72ce68573fa5">setDebugMode</a>(<span class="keyword">false</span>);                    <span class="comment">// [optional] debug mode to get detailed msgs</span></div><div class="line">    sensors.<a class="code" href="classSensors.html#ae25465fbd64d3b2b9ae31e2cb5a4b246">detectI2COnly</a>(<span class="keyword">true</span>);                    <span class="comment">// [optional] force to only i2c sensors</span></div><div class="line">    sensors.<a class="code" href="classSensors.html#a019efdf3e65081e9ace94e1f05338e4b">init</a>();                                 <span class="comment">// Auto detection to UART and i2c sensors</span></div><div class="line"></div><div class="line">    <span class="comment">// Alternatives only for UART sensors (TX/RX):</span></div><div class="line"></div><div class="line">    <span class="comment">// sensors.init(sensors.Auto);                  // Auto detection to UART sensors (Honeywell, Plantower, Panasonic)</span></div><div class="line">    <span class="comment">// sensors.init(sensors.Panasonic);             // Force UART detection to Panasonic sensor</span></div><div class="line">    <span class="comment">// sensors.init(sensors.Sensirion);             // Force UART detection to Sensirion sensor</span></div><div class="line">    <span class="comment">// sensors.init(sensors.Mhz19);                 // Force UART detection to Mhz14 or Mhz19 CO2 sensor</span></div><div class="line">    <span class="comment">// sensors.init(sensors.SDS011);                // Force UART detection to SDS011 sensor</span></div><div class="line">    <span class="comment">// sensors.init(sensors.CM1106);                // Force UART detection to CM1106 CO2 sensor</span></div><div class="line">    <span class="comment">// sensors.init(sensors.SENSEAIRS8);            // Force UART detection to SenseAirS8 CO2 sensor</span></div><div class="line">    <span class="comment">// sensors.init(sensors.Auto,PMS_RX,PMS_TX);    // Auto detection on custom RX,TX</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">// Also you can access to sub library objects, and perform for example calls like next:</span></div><div class="line"></div><div class="line">    <span class="comment">// sensors.sps30.sleep()</span></div><div class="line">    <span class="comment">// sensors.bme.readPressure();</span></div><div class="line">    <span class="comment">// sensors.mhz19.getRange();</span></div><div class="line">    <span class="comment">// sensors.scd30.getTemperatureOffset();</span></div><div class="line">    <span class="comment">// sensors.aht10.readRawData();</span></div><div class="line">    <span class="comment">// sensors.s8.set_ABC_period(period)</span></div><div class="line">    <span class="comment">// ...</span></div><div class="line"></div><div class="line">    delay(500);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> loop() {</div><div class="line">    sensors.<a class="code" href="classSensors.html#a255ece4e475221edb8ba7a8983014a76">loop</a>();  <span class="comment">// read sensor data and showed it</span></div><div class="line">}</div></div><!-- fragment --><h2>Output</h2>
<p>On your serial monitor you should have something like that:</p>
<div class="fragment"><div class="line">--&gt;[SETUP] Detecting sensors..</div><div class="line">--&gt;[SETUP] Sensor configured: SENSIRION</div><div class="line">--&gt;[MAIN] PM1.0: 002 PM2.5: 004 PM10: 006</div><div class="line">--&gt;[MAIN] PM1.0: 002 PM2.5: 002 PM10: 002</div><div class="line">--&gt;[MAIN] PM1.0: 002 PM2.5: 002 PM10: 002</div></div><!-- fragment --><h2>Multivariable demo</h2>
<p>In this <a href="https://www.youtube.com/watch?v=-5Va47Bap48">demo</a> with two devices and multiple sensors, you can choose the possible sub sensors units:</p>
<p><a href="https://www.youtube.com/watch?v=-5Va47Bap48"></a></p>
<h2>Multivariable alternative implementation</h2>
<p>The last version added new getters to have the current status of each unit of each sensor connected to the device in real time. Also you can retrieve the list of device names and other stuff:</p>
<p>For example:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;Arduino.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;Sensors.hpp&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> printSensorsDetected() {</div><div class="line">    uint16_t sensors_count =  sensors.<a class="code" href="classSensors.html#ad8395e69cf5dcc68d0a8049ec7372a81">getSensorsRegisteredCount</a>();</div><div class="line">    uint16_t units_count   =  sensors.<a class="code" href="classSensors.html#a1d723cdb619b2d61d3e4080182a12cbb">getUnitsRegisteredCount</a>();</div><div class="line">    Serial.println(<span class="stringliteral">&quot;--&gt;[MAIN] Sensors detected count\t: &quot;</span> + String(sensors_count));</div><div class="line">    Serial.println(<span class="stringliteral">&quot;--&gt;[MAIN] Sensors units count  \t: &quot;</span>  + String(units_count));</div><div class="line">    Serial.print(  <span class="stringliteral">&quot;--&gt;[MAIN] Sensors devices names\t: &quot;</span>);</div><div class="line">    <span class="keywordtype">int</span> i = 0;</div><div class="line">    <span class="keywordflow">while</span> (sensors.<a class="code" href="classSensors.html#af9ee8f89e81d76a4c2b41ed6dc38f2f3">getSensorsRegistered</a>()[i++] != 0) {</div><div class="line">        Serial.print(sensors.<a class="code" href="classSensors.html#aa7ca70f31838cba52b96f76aa4a0d4a2">getSensorName</a>((SENSORS)sensors.<a class="code" href="classSensors.html#af9ee8f89e81d76a4c2b41ed6dc38f2f3">getSensorsRegistered</a>()[i - 1]));</div><div class="line">        Serial.print(<span class="stringliteral">&quot;,&quot;</span>);</div><div class="line">    }</div><div class="line">    Serial.println();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> printSensorsValues() {</div><div class="line">    Serial.println(<span class="stringliteral">&quot;\n--&gt;[MAIN] Preview sensor values:&quot;</span>);</div><div class="line">    UNIT unit = sensors.<a class="code" href="classSensors.html#ad33c76f341c86ac1900c5953fca9c0d1">getNextUnit</a>();</div><div class="line">    <span class="keywordflow">while</span>(unit != UNIT::NUNIT) {</div><div class="line">        String uName = sensors.<a class="code" href="classSensors.html#a4abb5d2a00d31a407e32cbdabe00b6eb">getUnitName</a>(unit);</div><div class="line">        <span class="keywordtype">float</span> uValue = sensors.<a class="code" href="classSensors.html#a7e75dd4e3f2e655a9961f57650cbf749">getUnitValue</a>(unit);</div><div class="line">        String uSymb = sensors.<a class="code" href="classSensors.html#a365a45dc5c9ab598cfc206368579b94a">getUnitSymbol</a>(unit);</div><div class="line">        Serial.print(<span class="stringliteral">&quot;--&gt;[MAIN] &quot;</span> + uName + <span class="stringliteral">&quot;: &quot;</span> + String(uValue) + <span class="stringliteral">&quot; &quot;</span> + uSymb);</div><div class="line">        unit = sensors.<a class="code" href="classSensors.html#ad33c76f341c86ac1900c5953fca9c0d1">getNextUnit</a>();</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> onSensorDataOk() {</div><div class="line">    Serial.println(<span class="stringliteral">&quot;======= E X A M P L E   T E S T =========&quot;</span>);</div><div class="line">    printSensorsDetected();</div><div class="line">    printSensorsValues(); </div><div class="line">    Serial.println(<span class="stringliteral">&quot;=========================================&quot;</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/******************************************************************************</span></div><div class="line"><span class="comment">*  M A I N</span></div><div class="line"><span class="comment">******************************************************************************/</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> setup() {</div><div class="line">    Serial.begin(115200);</div><div class="line">    delay(100);</div><div class="line">    sensors.<a class="code" href="classSensors.html#ac723c0d9cf5af5daa0fa8d041f41f3d8">setSampleTime</a>(5);                       <span class="comment">// config sensors sample time interval</span></div><div class="line">    sensors.<a class="code" href="classSensors.html#a729f911e0508cc8814a2276ff519b219">setOnDataCallBack</a>(&amp;onSensorDataOk);     <span class="comment">// all data read callback</span></div><div class="line">    sensors.<a class="code" href="classSensors.html#ac749e2c2618a177afa7d72ce68573fa5">setDebugMode</a>(<span class="keyword">true</span>);                     <span class="comment">// [optional] debug mode</span></div><div class="line">    sensors.<a class="code" href="classSensors.html#ae25465fbd64d3b2b9ae31e2cb5a4b246">detectI2COnly</a>(<span class="keyword">false</span>);                   <span class="comment">// disable force to only i2c sensors</span></div><div class="line">    sensors.<a class="code" href="classSensors.html#a019efdf3e65081e9ace94e1f05338e4b">init</a>();                                 <span class="comment">// Auto detection to UART and i2c sensors</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> loop() {</div><div class="line">    sensors.<a class="code" href="classSensors.html#a255ece4e475221edb8ba7a8983014a76">loop</a>();  <span class="comment">// read sensor data and showed it</span></div><div class="line">}</div></div><!-- fragment --><h2>UART detection demo</h2>
<p><a href="https://www.youtube.com/watch?v=hmukAmG5Eec"></a></p>
<p>CanAirIO sensorlib auto configuration demo on <a href="https://www.youtube.com/watch?v=hmukAmG5Eec">Youtube</a></p>
<h1>Wiring</h1>
<p>The current version of library supports 3 kinds of wiring connection, UART, i2c and TwoWire, in the main boards the library using the defaults pins of each board, but in some special cases the pins are:</p>
<h2>UART</h2>
<h3>Predefined UART</h3>
<p>The library has <a href="https://github.com/kike-canaries/canairio_sensorlib/blob/master/src/Sensors.hpp#L19-L52">pre-defined some UART pin configs</a>, these are selected on compiling time. Maybe you don't need change anything with your board, and maybe the nexts alternatives works for you:</p>
<table class="doxtable">
<tr>
<th align="left">Board model </th><th align="center">TX </th><th align="center">RX </th><th align="center">Notes  </th></tr>
<tr>
<td align="left">ESP32GENERIC </td><td align="center">1 </td><td align="center">3 </td><td align="center">ESP32 Pio defaults </td></tr>
<tr>
<td align="left">TTGOT7 / ESP32DEVKIT / D1MINI / NODEFINED </td><td align="center">16 </td><td align="center">17 </td><td align="center">CanAirIO devices ** </td></tr>
<tr>
<td align="left">TTGO_TDISPLAY </td><td align="center">12 </td><td align="center">13 </td><td align="center"></td></tr>
<tr>
<td align="left">M5COREINK </td><td align="center">14 </td><td align="center">13 </td><td align="center"></td></tr>
<tr>
<td align="left">TTGO TQ </td><td align="center">18 </td><td align="center">13 </td><td align="center"></td></tr>
<tr>
<td align="left">HELTEC </td><td align="center">18 </td><td align="center">17 </td><td align="center"></td></tr>
<tr>
<td align="left">WEMOSOLED </td><td align="center">15 </td><td align="center">13 </td><td align="center"></td></tr>
<tr>
<td align="left">ESP32PICOD4 </td><td align="center">3 </td><td align="center">1 </td><td align="center"></td></tr>
</table>
<p>** This pines are when you compile your project without specific any build variable or you board isn't in the list.</p>
<h3>Custom UART:</h3>
<p>Also you could define a custom UART pins in the init() method if it isn't autodected:</p>
<div class="fragment"><div class="line">sensors.<a class="code" href="classSensors.html#a019efdf3e65081e9ace94e1f05338e4b">init</a>(sensors.Auto,RX,TX); <span class="comment">// custom RX, custom TX pines.</span></div></div><!-- fragment --><h2>I2C (recommended)</h2>
<p>We are using the default pins for each board, some times it's pins are 21,22, please check your board schematic.</p>
<h2>TwoWire (deprecated soon)</h2>
<p>For now we are using it only for DHT sensors in PIN 23. For more info please review the next lines <a href="https://github.com/kike-canaries/canairio_sensorlib/blob/master/src/Sensors.hpp#L19-L52">here</a>.</p>
<h1>Examples</h1>
<h3>PlatformIO (recommended)</h3>
<h4>Compiling and Installing</h4>
<p>We recommended PlatformIO because is more easy than Arduino IDE. For this, please install first <a href="http://platformio.org/">PlatformIO</a> and its command line tools (Windows, MacOs and Linux), <b>pio</b> command, then connect your compatible board to the USB and run the next command:</p>
<div class="fragment"><div class="line">pio run --target upload</div></div><!-- fragment --><h3>Arduino IDE</h3>
<p>Only import the <code>ino</code> file of the sample and install the libraries listed on <code>library.json</code> and this library.</p>
<h3>Arduino CLI</h3>
<h4>Prerequisites</h4>
<p>For run the examples, you first need to install <b>arduino-cli</b> or the <b>Arduino IDE</b> with the libraries referenced in <b>lib_deps</b> on the file <a href="https://github.com/kike-canaries/canairio_sensorlib/blob/fix_ondataready_cb/platformio.ini">platformio.ini</a>, becuase <b>Arduino don't install it automatically</b> like PlatformIO. Then put CanAirIO sensor library in your library directory, you can download it from <a href="https://github.com/kike-canaries/canairio_sensorlib/releases">releases</a> section.</p>
<p>Also you need to add the <b>alternative links</b> for supporting the ESP32 boards:</p>
<div class="fragment"><div class="line">arduino-cli config init</div></div><!-- fragment --><p>in the <code>.arduino15/arduino-cli.yaml</code> file add:</p>
<div class="fragment"><div class="line">board_manager:</div><div class="line">  additional_urls:</div><div class="line">    - https://arduino.esp8266.com/stable/package_esp8266com_index.json</div><div class="line">    - https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json</div></div><!-- fragment --><h4>Compiling and Installing</h4>
<p>From <code>arduino-cli</code> you can run the basic example in a ESP32 board following these steps:</p>
<div class="fragment"><div class="line">arduino-cli core update-index</div><div class="line">arduino-cli core install esp32:esp32:lolin32</div><div class="line">arduino-cli compile --fqbn esp32:esp32:lolin32 basic</div><div class="line">arduino-cli upload --fqbn esp32:esp32:lolin32:UploadSpeed=115200 -p /dev/ttyUSB0 basic</div></div><!-- fragment --><p>where <code>basic</code> is the basic example on examples directory.</p>
<h1>Supporting the project</h1>
<p>If you want to contribute to the code or documentation, consider posting a bug report, feature request or a pull request.</p>
<p>When creating a pull request, we recommend that you do the following:</p>
<ul>
<li>Clone the repository</li>
<li>Create a new branch for your fix or feature. For example, git checkout -b fix/my-fix or git checkout -b feat/my-feature.</li>
<li>Run to any clang formatter if it is a code, for example using the <code>vscode</code> formatter. We are using Google style. More info <a href="https://clang.llvm.org/docs/ClangFormatStyleOptions.html">here</a></li>
<li>Document the PR description or code will be great</li>
<li>Target your pull request to be merged with <code>devel</code> branch</li>
</ul>
<p>Also you can make a donation, be a patreon or buy a device:</p>
<p><a href="https://raw.githubusercontent.com/kike-canaries/canairio_firmware/master/images/ethereum_donation_address.png" target="_blank"></a></p>
<ul>
<li>Via <b>Ethereum</b>: <code>0x1779cD3b85b6D8Cf1A5886B2CF5C53a0E072C108</code></li>
<li>Via <b>Liberapay</b>: <a href="https://liberapay.com/CanAirIO">CanAirIO in LiberaPay</a></li>
<li><b>Buy a device</b>: <a href="https://www.tindie.com/products/hpsaturn/canairio-bike/">CanAirIO Bike in Tindie</a></li>
<li><a href="https://www.buymeacoffee.com/hpsaturn">Inviting us <b>a coffee</b></a></li>
</ul>
<h1>TODO</h1>
<ul>
<li>[x] Auto detection for UART sensors (Honeywell, Panasonic and Plantower)</li>
<li>[x] Added SPS30 library with auto UART detection</li>
<li>[x] Disable/enable logs (debug mode flag)</li>
<li>[x] Added bme280, bmp280, aht10, sht31, am2320 i2c sensors</li>
<li>[x] Exposed public sub-libraries objects, sps30, aht10, etc.</li>
<li>[x] Added old DHT sensors</li>
<li>[x] Added CO2 sensors: MHZ19, SCD30, CM1106 via UART</li>
<li>[x] Added SDS011 particle metter</li>
<li>[x] BME680 support</li>
<li>[x] Added Sensirion SPS30 and Panasonic SN-GCJA5 via i2c</li>
<li>[x] Enable/Disable UART detection for force only i2c</li>
<li>[x] Temperature and Altitude compensation</li>
<li>[x] SenseAir S8 via UART support</li>
<li>[x] Multivariable selection (getNextUnit(),getUnitName(),etc)</li>
<li>[x] Two I2C channel supported for M5Stack Devices (M5StickC tested)</li>
<li>[ ] Sea level setting for Pressure sensors and others</li>
<li>[ ] Support to second UART port</li>
</ul>
<h1>Projects using this Library</h1>
<ul>
<li><a href="https://github.com/kike-canaries/canairio_firmware">CanAirIO Device</a>: ESP32 Air quality device for mobile and fixed stations. (PM2.5 and CO2)</li>
<li><a href="https://emariete.com/medidor-co2-display-tft-color-ttgo-t-display-sensirion-scd30">Medidor de CO2</a>: Un medidor de CO2 de alta calidad con pantalla en color. (CO2)</li>
</ul>
<h1>Credits</h1>
<p>Thanks to all collaborators and <a href="https://canair.io">CanAirIO</a> community for testing and reports. </p><hr/>
 </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
